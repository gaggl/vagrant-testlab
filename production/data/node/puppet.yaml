---
classes:
  - roles::puppetmaster
profiles::bootstrap::puppet::autosign: '/etc/puppetlabs/puppet/autosign.conf'
profiles::bootstrap::puppet::autosign_domains:
  - '*.gaggl.vagrant'
profiles::bootstrap::puppet::dns_alt_names:
  - consul.gaggl.vagrant
  - foreman.gaggl.vagrant
profiles::bootstrap::puppet::hiera_yaml_datadir: "/etc/puppetlabs/code/environments/production/hieradata"
profiles::bootstrap::puppet::install_vault: true
profiles::bootstrap::puppet::server: true
profiles::bootstrap::puppet::server_foreman: true
profiles::bootstrap::puppet::server_foreman_url: https://foreman.gaggl.vagrant
profiles::bootstrap::puppet::server_puppetdb_host: puppet.gaggl.vagrant
profiles::bootstrap::puppet::server_reports: 'store, foreman'
profiles::bootstrap::puppet::server_storeconfigs: true
profiles::database::postgresql: true
profiles::orchestration::consul::config:
  addresses: {
    http: '127.0.0.1 %{::ipaddress_eth1}'
  }
  bootstrap_expect: 1
  server: true
  ui_config:
    enabled: true
    metrics_provider: "prometheus"
    metrics_proxy:
      base_url: "http://metrics.gaggl.vagrant:9090/"
profiles::orchestration::consul::server: true
profiles::orchestration::consul::ui: true
profiles::puppet::foreman: true
profiles::puppet::foreman::settings:
  enc_environment:
    value: false
profiles::puppet::foreman_proxy: true
profiles::puppet::foreman_proxy::foreman_host: foreman.gaggl.vagrant
profiles::puppet::foreman_proxy::puppetca: true
profiles::puppet::puppetdb: true
profiles::puppet::puppetmaster: true
profiles::security::vault: true
profiles::security::vault::extra_config:
  api_addr: 'https://%{::ipaddress_eth1}:8200'
  cluster_addr: 'https://%{::ipaddress_eth1}:8201'
profiles::security::vault::listener:
  tcp:
    address: '%{::ipaddress_eth1}:8200'
    cluster_address: '%{::ipaddress_eth1}:8201'
    tls_disable: 1
profiles::security::vault::storage:
  consul:
    address: '127.0.0.1:8500'
    path: 'vault/'
profiles::security::vault::telemetry:
  prometheus_retention_time: "30s"
  disable_hostname: true
...
